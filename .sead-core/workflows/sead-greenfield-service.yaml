# SEAD Greenfield Service Development Workflow
workflow:
  id: sead-greenfield-service
  name: SEAD Constitutional Greenfield Service/API Development
  description: >-
    Constitutional agent workflow for building backend services from concept to development.
    Supports both comprehensive constitutional planning for complex services and rapid prototyping 
    for simple APIs with catalog integration, governance validation, and context preservation.
  type: constitutional_greenfield_service
  constitutional_framework: true
  catalog_integration: true
  governance_validation: enabled
  context_preservation: enforced
  project_types:
    - constitutional-rest-api
    - constitutional-graphql-api
    - constitutional-microservice
    - constitutional-backend-service
    - constitutional-api-prototype
    - constitutional-simple-service
    - api-contracts-catalog-service
    - governance-compliant-service

  constitutional_requirements:
    mode_detection: required
    catalog_read: mandatory
    governance_validation: continuous
    context_preservation: enforced
    agent_handoff_validation: required

  sequence:
    - agent: sead-analyst
      creates: sead-project-brief.md
      constitutional_validation: required
      catalog_integration: required
      optional_steps:
        - sead-brainstorming-session
        - sead-market-research-prompt
      notes: |
        Can do constitutional brainstorming first, then optional deep constitutional research before creating project brief with:
        - Comprehensive catalog integration across all 11 domains
        - Constitutional governance validation requirements
        - Context preservation strategy for service interactions
        - API contracts catalog compliance requirements
        CONSTITUTIONAL SAVE OUTPUT: Copy final sead-project-brief.md to your project's docs/ folder with catalog integration references.

    - agent: sead-product-owner
      creates: sead-prd.md
      uses: sead-prd-tmpl
      requires: sead-project-brief.md
      constitutional_validation: required
      catalog_integration: required
      notes: |
        Creates constitutional PRD from project brief with comprehensive catalog integration:
        - API/service requirements with api-contracts catalog compliance
        - Service governance validation framework
        - Constitutional constraints and validation requirements
        - Context preservation strategy for service interactions and agent handoffs
        CONSTITUTIONAL SAVE OUTPUT: Copy final sead-prd.md to your project's docs/ folder with catalog pattern references.

    - agent: sead-architect
      creates: sead-architecture.md
      uses: sead-architecture-tmpl
      requires: sead-prd.md
      constitutional_validation: required
      catalog_integration: required
      optional_steps:
        - sead-technical-research-prompt
      notes: |
        Creates constitutional backend/service architecture with comprehensive catalog integration:
        - Service architecture with governance validation framework
        - API contracts catalog compliance and evolution strategy
        - Constitutional service patterns and catalog contribution
        - Context preservation architecture for service interactions
        - May suggest constitutional changes to PRD stories or new constitutional stories
        CONSTITUTIONAL SAVE OUTPUT: Copy final sead-architecture.md to your project's docs/ folder with catalog pattern references.

    - agent: sead-product-owner
      updates: sead-prd.md (if needed)
      requires: sead-architecture.md
      condition: constitutional_architecture_suggests_prd_changes
      constitutional_validation: required
      catalog_integration: required
      notes: |
        If constitutional architect suggests story changes, update constitutional PRD with:
        - Governance validation for story changes
        - Catalog compliance verification for updated requirements
        - Context preservation validation for changed interactions
        Re-export the complete unredacted constitutional sead-prd.md to docs/ folder with catalog integration.

    - agent: sead-product-owner
      validates: all_constitutional_artifacts
      uses: sead-po-master-checklist
      constitutional_validation: required
      catalog_integration: required
      notes: |
        Validates all constitutional documents for consistency, completeness, and governance compliance:
        - API contracts catalog compliance verification
        - Service governance validation framework validation
        - Constitutional integration safety assessment
        - Context preservation validation for service interactions
        May require updates to any constitutional document with catalog integration improvements.

    - agent: various_constitutional_agents
      updates: any_flagged_constitutional_documents
      condition: constitutional_po_checklist_issues
      constitutional_validation: required
      catalog_integration: required
      notes: |
        If Constitutional PO finds issues, return to relevant constitutional agent to fix and re-export 
        updated constitutional documents to docs/ folder with:
        - Service governance validation compliance
        - API contracts catalog integration improvements
        - Context preservation enhancements

    - agent: sead-product-owner
      action: shard_constitutional_documents
      creates: sharded_constitutional_docs
      requires: all_constitutional_artifacts_in_project
      constitutional_validation: required
      catalog_integration: required
      notes: |
        Shard constitutional documents for IDE development with catalog integration:
        - Option A: Use Constitutional PO agent to shard: @sead-product-owner then ask to shard docs/sead-prd.md
        - Option B: Manual: Drag sead-shard-doc task + docs/sead-prd.md into chat
        - Creates docs/sead-prd/ and docs/sead-architecture/ folders with sharded constitutional content
        - All shards include api-contracts catalog references and governance validation requirements
        - Context preservation documentation included in all shards

    - agent: sead-scrum-master
      action: create_constitutional_story
      creates: sead-story.md
      requires: sharded_constitutional_docs
      repeats: for_each_constitutional_epic
      constitutional_validation: required
      catalog_integration: required
      notes: |
        Constitutional story creation cycle with governance validation:
        - Constitutional SM Agent (New Chat): @sead-scrum-master → *create
        - Creates next constitutional story from sharded docs with catalog integration
        - Constitutional story starts in "Draft" status with governance validation pending
        - All stories include api-contracts catalog compliance requirements
        - Context preservation requirements documented for service interactions

    - agent: sead-analyst/sead-project-manager
      action: review_draft_constitutional_story
      updates: sead-story.md
      requires: sead-story.md
      optional: true
      condition: user_wants_constitutional_story_review
      constitutional_validation: required
      catalog_integration: required
      notes: |
        OPTIONAL: Review and approve draft constitutional story with governance validation:
        - NOTE: sead-story-review task with api-contracts catalog compliance verification
        - Review constitutional story completeness, catalog compliance, and governance alignment
        - Update constitutional story status: Draft → Approved with governance validation
        - Validate service integration safety and context preservation requirements

    - agent: sead-developer
      action: implement_constitutional_story
      creates: constitutional_implementation_files
      requires: sead-story.md
      constitutional_validation: required
      catalog_integration: required
      notes: |
        Constitutional Dev Agent (New Chat): @sead-developer with service governance validation
        - Implements approved constitutional story with api-contracts catalog compliance
        - Updates File List with all constitutional changes and service integration references
        - Ensures governance validation throughout service implementation
        - Maintains context preservation for service interactions and agent handoffs
        - Marks constitutional story as "Review" when complete with governance compliance

    - agent: sead-qa
      action: review_constitutional_implementation
      updates: constitutional_implementation_files
      requires: constitutional_implementation_files
      optional: true
      constitutional_validation: required
      catalog_integration: required
      notes: |
        OPTIONAL: Constitutional QA Agent (New Chat): @sead-qa → sead-review-story with service governance validation
        - Senior constitutional dev review with catalog-compliant service refactoring ability
        - Fixes small constitutional service issues directly with governance validation
        - Leaves constitutional checklist for remaining service items with api-contracts catalog compliance requirements
        - Updates constitutional story status (Review → Done or stays Review) with governance validation
        - Validates service integration safety and context preservation

    - agent: sead-developer
      action: address_constitutional_qa_feedback
      updates: constitutional_implementation_files
      condition: constitutional_qa_left_unchecked_items
      constitutional_validation: required
      catalog_integration: required
      notes: |
        If Constitutional QA left unchecked service items with governance implications:
        - Constitutional Dev Agent (New Chat): Address remaining constitutional service items with api-contracts catalog compliance
        - Return to Constitutional QA for final service governance validation approval
        - Ensure service integration safety and context preservation throughout feedback resolution

    - step: repeat_constitutional_development_cycle
      action: continue_for_all_constitutional_stories
      constitutional_validation: required
      catalog_integration: required
      notes: |
        Repeat constitutional story cycle (Constitutional SM → Constitutional Dev → Constitutional QA) for all constitutional service epic stories
        Continue until all constitutional stories in PRD are complete with:
        - Service governance validation and api-contracts catalog compliance
        - Context preservation across all service interactions and agent handoffs
        - Integration patterns catalog evolution and governance compliance

    - agent: sead-product-owner
      action: constitutional_epic_retrospective
      creates: sead-epic-retrospective.md
      condition: constitutional_epic_complete
      optional: true
      constitutional_validation: required
      catalog_integration: required
      notes: |
        OPTIONAL: After constitutional service epic completion with governance validation
        - NOTE: sead-epic-retrospective task with api-contracts catalog evolution assessment
        - Validate constitutional service epic was completed correctly with governance compliance
        - Document constitutional service learnings, catalog evolution contributions, and governance improvements
        - Assess service integration safety and context preservation effectiveness across agent handoffs

    - step: constitutional_workflow_end
      action: constitutional_project_complete
      constitutional_validation: required
      catalog_integration: required
      notes: |
        All constitutional service stories implemented and reviewed with governance validation!
        Constitutional service development phase complete with:
        - API contracts catalog integration and evolution
        - Service governance compliance and validation
        - Context preservation across service interactions

        Constitutional Reference: .sead-core/data/sead-kb.md#Constitutional Service Development Workflow

  constitutional_flow_diagram: |
    ```mermaid
    graph TD
        A[Start: Constitutional Service Development] --> B[sead-analyst: constitutional project-brief.md]
        B --> C[sead-po: constitutional prd.md]
        C --> D[sead-architect: constitutional architecture.md]
        D --> E{Constitutional Architecture suggests PRD changes?}
        E -->|Yes| F[sead-po: update constitutional prd.md]
        E -->|No| G[sead-po: validate all constitutional artifacts]
        F --> G
        G --> H{Constitutional PO finds issues?}
        H -->|Yes| I[Return to constitutional agent for fixes]
        H -->|No| J[sead-po: shard constitutional documents]
        I --> G
        
        J --> K[sead-sm: create constitutional story]
        K --> L{Review constitutional draft story?}
        L -->|Yes| M[sead-analyst/sead-pm: review & approve constitutional story]
        L -->|No| N[sead-dev: implement constitutional story]
        M --> N
        N --> O{Constitutional QA review?}
        O -->|Yes| P[sead-qa: review constitutional implementation]
        O -->|No| Q{More constitutional stories?}
        P --> R{Constitutional QA found issues?}
        R -->|Yes| S[sead-dev: address constitutional QA feedback]
        R -->|No| Q
        S --> P
        Q -->|Yes| K
        Q -->|No| T{Constitutional Epic retrospective?}
        T -->|Yes| U[sead-po: constitutional epic retrospective]
        T -->|No| V[Constitutional Project Complete]
        U --> V

        B -.-> B1[Optional: constitutional brainstorming]
        B -.-> B2[Optional: constitutional market research]
        D -.-> D1[Optional: constitutional technical research]

        style V fill:#90EE90
        style J fill:#ADD8E6
        style K fill:#ADD8E6
        style N fill:#ADD8E6
        style B fill:#FFE4B5
        style C fill:#FFE4B5
        style D fill:#FFE4B5
        style M fill:#F0E68C
        style P fill:#F0E68C
        style U fill:#F0E68C
    ```

  constitutional_decision_guidance:
    when_to_use:
      - Building constitutional production APIs or microservices with governance validation
      - Multiple endpoints and complex constitutional business logic with catalog compliance
      - Need comprehensive constitutional documentation and governance-validated testing
      - Multiple constitutional team members with context preservation requirements
      - Long-term constitutional maintenance with catalog evolution expected
      - Enterprise or external-facing constitutional APIs with governance compliance
      - API contracts catalog evolution and compliance required

  constitutional_handoff_prompts:
    constitutional_analyst_to_pm: |
      Constitutional project brief is complete with governance validation and catalog integration. 
      Save it as docs/sead-project-brief.md in your project with catalog pattern references, 
      then create the constitutional PRD with api-contracts catalog compliance.

    constitutional_pm_to_architect: |
      Constitutional PRD is ready with governance validation and catalog integration. 
      Save it as docs/sead-prd.md in your project with catalog pattern references, 
      then create the constitutional service architecture with api-contracts catalog compliance.

    constitutional_architect_review: |
      Constitutional architecture complete with comprehensive catalog integration and governance validation. 
      Save it as docs/sead-architecture.md with catalog pattern references. 
      Do you suggest any constitutional changes to the PRD stories or need new constitutional stories added with governance validation?

    constitutional_architect_to_pm: |
      Please update the constitutional PRD with the suggested constitutional story changes, 
      then re-export the complete constitutional sead-prd.md to docs/ with:
      - Governance validation for all changes
      - Catalog integration compliance
      - Context preservation validation

    constitutional_updated_to_po: |
      All constitutional documents ready in docs/ folder with governance compliance and catalog integration. 
      Please validate all constitutional artifacts for:
      - Consistency with governance framework
      - API contracts catalog compliance
      - Context preservation validation

    constitutional_po_issues: |
      Constitutional PO found issues with [constitutional_document] affecting governance validation and catalog compliance. 
      Please return to [constitutional_agent] to fix and re-save the updated constitutional document with:
      - Service governance validation improvements
      - Catalog integration enhancements
      - Context preservation corrections

    constitutional_complete: |
      All constitutional planning artifacts validated and saved in docs/ folder with governance compliance and catalog integration. 
      Constitutional service artifacts include:
      - API contracts catalog compliance validation
      - Service governance validation framework
      - Context preservation documentation
      
      Move to IDE environment to begin constitutional development with catalog-aware service implementation.